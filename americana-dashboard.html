<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Americana Landscape Co. â€” CEO Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'DM Sans',system-ui,sans-serif;background:#0a0f1a;color:#e2e8f0;overflow:hidden}
::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:#1e293b;border-radius:3px}
input[type="checkbox"]{accent-color:#10b981;cursor:pointer;width:15px;height:15px}
select{appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' fill='%2364748b' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 8px center;padding-right:24px!important}
input:focus,select:focus{border-color:#10b981!important;outline:none}
</style>
</head>
<body>
<div id="root"></div>
<script>
"use strict";
var h=React.createElement,useState=React.useState,useEffect=React.useEffect,useMemo=React.useMemo;

/* COLORS */
var C={bg:"#0a0f1a",card:"#111827",bdr:"#1e293b",tx:"#e2e8f0",mut:"#64748b",dim:"#475569",pri:"#10b981",red:"#ef4444",amb:"#f59e0b",blu:"#3b82f6",pur:"#8b5cf6",cyn:"#06b6d4"};

/* SVG ICON */
function Ic(name,sz,col){
  var s=sz||18,c=col||"currentColor";
  var P={
    home:["M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z","M9 22V12h6v10"],
    checkSq:["M9 11l3 3L22 4","M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"],
    building:["M6 22V4a2 2 0 012-2h8a2 2 0 012 2v18","M6 12H4a2 2 0 00-2 2v6a2 2 0 002 2h2","M18 9h2a2 2 0 012 2v9a2 2 0 01-2 2h-2"],
    dollar:["M12 1v22","M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"],
    shield:["M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"],
    users:["M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2","M9 11a4 4 0 100-8 4 4 0 000 8z","M23 21v-2a4 4 0 00-3-3.87","M16 3.13a4 4 0 010 7.75"],
    alert:["M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z","M12 9v4","M12 17h.01"],
    chevL:["M15 18l-6-6 6-6"],chevR:["M9 18l6-6-6-6"],
    plus:["M12 5v14","M5 12h14"],
    trash:["M3 6h18","M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"],
    check:["M20 6L9 17l-5-5"],
    clock:["M12 2a10 10 0 100 20 10 10 0 000-20z","M12 6v6l4 2"],
    refresh:["M1 4v6h6","M23 20v-6h-6","M20.49 9A9 9 0 005.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 013.51 15"],
    target:["M12 2a10 10 0 100 20 10 10 0 000-20z","M12 6a6 6 0 100 12 6 6 0 000-12z","M12 10a2 2 0 100 4 2 2 0 000-4z"]
  };
  var paths=P[name]||P.home;
  return h("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:c,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",style:{flexShrink:0}},
    paths.map(function(d,i){return h("path",{key:i,d:d})})
  );
}

/* HELPERS */
function fmt(n){if(n>=1e6)return"$"+(n/1e6).toFixed(1)+"M";if(n>=1e3)return"$"+(n/1e3).toFixed(0)+"K";return"$"+n.toLocaleString()}
function fmtF(n){return"$"+n.toLocaleString()}
function ld(k,d){try{var v=localStorage.getItem("am_"+k);return v?JSON.parse(v):d}catch(e){return d}}
function sv(k,v){try{localStorage.setItem("am_"+k,JSON.stringify(v))}catch(e){}}

/* SVG BAR CHART */
function SvgBar(props){
  var data=props.data,W=720,H=200;
  var mx=0;data.forEach(function(d){mx=Math.max(mx,d.actual||0,d.forecast||0)});if(!mx)mx=1;
  var L=50,T=10,B=26,cw=W-L-10,ch=H-T-B;
  var bw=Math.min(26,(cw/data.length)-6);
  var tY=T+ch-(366667/mx)*ch;
  var els=[];
  [0,0.25,0.5,0.75,1].forEach(function(f,i){
    var y=T+ch-f*ch;
    els.push(h("line",{key:"g"+i,x1:L,x2:W-10,y1:y,y2:y,stroke:C.bdr,strokeDasharray:"3 3"}));
    if(i%2===0)els.push(h("text",{key:"gl"+i,x:L-6,y:y+4,textAnchor:"end",fill:C.mut,fontSize:10,fontFamily:"JetBrains Mono,monospace"},fmt(f*mx)));
  });
  els.push(h("line",{key:"tl",x1:L,x2:W-10,y1:tY,y2:tY,stroke:C.dim,strokeDasharray:"6 4"}));
  els.push(h("text",{key:"tt",x:W-10,y:tY-4,textAnchor:"end",fill:C.dim,fontSize:9},"$367K/mo target"));
  data.forEach(function(d,i){
    var x=L+(i/data.length)*cw+(cw/data.length-bw)/2;
    var val=d.actual||d.forecast||0;
    var bh=Math.max((val/mx)*ch,1);
    var color=d.actual?"#22c55e":d.forecast<200000?C.red:C.blu;
    var op=d.actual?1:0.6;
    els.push(h("rect",{key:"b"+i,x:x,y:T+ch-bh,width:bw,height:bh,rx:3,fill:color,opacity:op}));
    els.push(h("text",{key:"bl"+i,x:x+bw/2,y:H-6,textAnchor:"middle",fill:C.mut,fontSize:10},d.month));
    if(val>mx*0.06)els.push(h("text",{key:"bv"+i,x:x+bw/2,y:T+ch-bh-4,textAnchor:"middle",fill:C.mut,fontSize:8,fontFamily:"JetBrains Mono,monospace"},fmt(val)));
  });
  return h("svg",{viewBox:"0 0 "+W+" "+H,style:{width:"100%",height:"auto"}},els);
}

/* SVG DONUT */
function SvgPie(props){
  var data=props.data,sz=110,cx=sz/2,cy=sz/2,r=42,ir=24;
  var total=0;data.forEach(function(d){total+=d.value});
  var ang=-90,arcs=[];
  data.forEach(function(d){
    var a=(d.value/total)*360;
    var s1=ang*Math.PI/180,s2=(ang+a)*Math.PI/180;
    ang+=a;
    var x1=cx+r*Math.cos(s1),y1=cy+r*Math.sin(s1);
    var x2=cx+r*Math.cos(s2),y2=cy+r*Math.sin(s2);
    var ix1=cx+ir*Math.cos(s2),iy1=cy+ir*Math.sin(s2);
    var ix2=cx+ir*Math.cos(s1),iy2=cy+ir*Math.sin(s1);
    var lg=a>180?1:0;
    arcs.push(h("path",{key:d.name,d:"M"+x1+" "+y1+" A"+r+" "+r+" 0 "+lg+" 1 "+x2+" "+y2+" L"+ix1+" "+iy1+" A"+ir+" "+ir+" 0 "+lg+" 0 "+ix2+" "+iy2+" Z",fill:d.color}));
  });
  return h("svg",{viewBox:"0 0 "+sz+" "+sz,style:{width:sz,height:sz}},arcs);
}

/* DATA DEFAULTS */
var DEF_T=[
  {id:"t-1",title:"Call MLGP \u2014 $85,772 outstanding, $17K at 90+ days",owner:"Robson",category:"collections",priority:1,due:"This Week",completed:false},
  {id:"t-2",title:"Schedule employment attorney consultation for 1099 audit",owner:"Robson",category:"compliance",priority:1,due:"This Week",completed:false},
  {id:"t-3",title:"Get workers\u2019 comp quotes for field crew (12-14 workers exposed)",owner:"Robson",category:"compliance",priority:1,due:"This Week",completed:false},
  {id:"t-4",title:"H&W Rockwall collection call \u2014 $8,926 at 90+ days",owner:"Robson",category:"collections",priority:1,due:"This Week",completed:false},
  {id:"t-5",title:"Populate bid values on ALL 92 Sales Hot List items",owner:"Jason",category:"pipeline",priority:2,due:"Next 2 Weeks",completed:false},
  {id:"t-6",title:"Define Karly\u2019s role \u2014 weekly outputs & accountability",owner:"Robson",category:"operations",priority:2,due:"Next 2 Weeks",completed:false},
  {id:"t-7",title:"Clarify Cipriano\u2019s role and title in org chart",owner:"Robson",category:"operations",priority:2,due:"Next 2 Weeks",completed:false},
  {id:"t-8",title:"Set hard filing deadlines with JW Hopp for 2023/2024 taxes",owner:"Robson",category:"financial",priority:2,due:"Next 2 Weeks",completed:false},
  {id:"t-9",title:"QBO chart of accounts setup (construction-specific)",owner:"JW Hopp",category:"financial",priority:2,due:"Next 2 Weeks",completed:false},
  {id:"t-10",title:"Connect Chase bank feeds to QBO",owner:"JW Hopp",category:"financial",priority:2,due:"Next 2 Weeks",completed:false},
  {id:"t-11",title:"Identify & prioritize bids for Q4 2026 work (revenue cliff)",owner:"Jason",category:"pipeline",priority:3,due:"Next 30 Days",completed:false},
  {id:"t-12",title:"Siteline implementation kickoff",owner:"Robson",category:"operations",priority:3,due:"Next 30 Days",completed:false},
  {id:"t-13",title:"Time tracking tool selection and field crew rollout",owner:"Robson",category:"operations",priority:3,due:"Next 30 Days",completed:false},
  {id:"t-14",title:"Migrate AP/AR from Excel to QBO",owner:"JW Hopp",category:"financial",priority:3,due:"Next 30 Days",completed:false},
  {id:"t-15",title:"Complete lien waiver backlog (81% incomplete \u2014 42 of 52)",owner:"Karly",category:"admin",priority:3,due:"Next 30 Days",completed:false},
  {id:"t-r1",title:"Review AR aging \u2014 follow up on 30+ day invoices",owner:"Robson",category:"collections",priority:2,due:"Weekly",completed:false,recurring:"weekly"},
  {id:"t-r2",title:"Update WIP % complete on active projects",owner:"Robson",category:"operations",priority:2,due:"Weekly",completed:false,recurring:"weekly"},
  {id:"t-r3",title:"Review weekly payroll for accuracy",owner:"Karly",category:"financial",priority:2,due:"Weekly",completed:false,recurring:"weekly"},
  {id:"t-r4",title:"Submit pay applications for active projects",owner:"Robson",category:"financial",priority:1,due:"Monthly",completed:false,recurring:"monthly"}
];
var DEF_P=[
  {id:"26001",name:"Encore Wire",client:"H&W",tc:906269,rem:906269,pct:0,st:"not_started",bond:false,start:"Mar 2026",notes:""},
  {id:"25024",name:"Celina DT Center",client:"Swinerton",tc:670226,rem:670226,pct:0,st:"not_started",bond:true,start:"Apr 2026",notes:""},
  {id:"25006",name:"Allen Police",client:"Core",tc:680823,rem:622631,pct:9,st:"active",bond:false,notes:""},
  {id:"25022",name:"McKinney TKI Terminal",client:"Swinerton",tc:920340,rem:615580,pct:33,st:"active",bond:true,notes:""},
  {id:"25019",name:"GISD Multi Program",client:"Core",tc:370525,rem:364074,pct:2,st:"active",bond:false,notes:""},
  {id:"25023",name:"Schwab GH2 Expansion",client:"Swinerton",tc:346622,rem:346622,pct:0,st:"not_started",bond:false,start:"Jun 2026",notes:""},
  {id:"25003",name:"Sherman Stadium",client:"Core",tc:830090,rem:263600,pct:68,st:"active",bond:false,notes:""},
  {id:"26003",name:"Coppell Lakeside ES",client:"Core",tc:208590,rem:208590,pct:0,st:"not_started",bond:false,notes:""},
  {id:"25004",name:"Clearfork C2",client:"Whiting Turner",tc:312091,rem:198460,pct:36,st:"active",bond:false,notes:""},
  {id:"25026",name:"Mansfield ISD Barber",client:"Core",tc:208336,rem:198296,pct:5,st:"active",bond:false,notes:""},
  {id:"25018",name:"Shiloh Retail",client:"XS",tc:124690,rem:116005,pct:7,st:"active",bond:false,notes:""},
  {id:"25028",name:"Sandbox Scholar",client:"XS Construction",tc:51425,rem:51425,pct:0,st:"not_started",bond:false,notes:""},
  {id:"26002",name:"Rasa Aviation",client:"MLGP",tc:49000,rem:49000,pct:0,st:"not_started",bond:false,notes:""},
  {id:"24029",name:"Shiloh Office Park",client:"XS",tc:68830,rem:47275,pct:31,st:"active",bond:false,notes:""}
];
var DEF_AR=[
  {id:"ar-1",client:"MLGP",project:"Multiple",amount:85772,aging:"Mixed",risk:"high",notes:"$17K at 90+ \u2014 call NOW",lc:""},
  {id:"ar-2",client:"H&W",project:"Rockwall",amount:8926,aging:"90+",risk:"high",notes:"Small but 90+ overdue",lc:""},
  {id:"ar-3",client:"Swinerton",project:"McKinney Terminal",amount:304760,aging:"0-30",risk:"monitor",notes:"Largest single receivable",lc:""},
  {id:"ar-4",client:"Whiting Turner",project:"Clearfork C2",amount:113631,aging:"0-30",risk:"monitor",notes:"New client \u2014 watch",lc:""},
  {id:"ar-5",client:"Core",project:"Sherman Stadium",amount:58306,aging:"0-30",risk:"low",notes:"Reliable payer",lc:""},
  {id:"ar-6",client:"H&W",project:"SPR Packaging",amount:46445,aging:"0-30",risk:"low",notes:"On track",lc:""},
  {id:"ar-7",client:"XS",project:"Multiple",amount:39413,aging:"0-30",risk:"low",notes:"Reliable",lc:""},
  {id:"ar-8",client:"Core",project:"Multiple Smaller",amount:47149,aging:"30-90",risk:"monitor",notes:"Mixed aging",lc:""},
  {id:"ar-9",client:"Ready",project:"Tom Thumb",amount:19835,aging:"0-30",risk:"low",notes:"Standard",lc:""}
];
var DEF_M=[
  {id:"m-1",task:"JW Hopp onboarded with clear scope",st:"partial",owner:"Toby",note:"Onboarded \u2014 scope unclear",wk:"Wk 1-2"},
  {id:"m-2",task:"QBO chart of accounts setup",st:"not_started",owner:"JW Hopp",note:"Blocked",wk:"Wk 1-2"},
  {id:"m-3",task:"Migrate AP/AR from Excel to QBO",st:"not_started",owner:"JW Hopp",note:"",wk:"Wk 1-2"},
  {id:"m-4",task:"Chase bank feeds connected",st:"not_started",owner:"JW Hopp",note:"",wk:"Wk 1-2"},
  {id:"m-5",task:"Employment attorney consultation",st:"not_started",owner:"Robson",note:"OVERDUE",wk:"Wk 1-6"},
  {id:"m-6",task:"Workers\u2019 comp quote & bind",st:"not_started",owner:"Robson",note:"OVERDUE",wk:"Wk 1-6"},
  {id:"m-7",task:"Siteline implementation",st:"not_started",owner:"Robson",note:"",wk:"Wk 2-4"},
  {id:"m-8",task:"Time tracking rollout",st:"not_started",owner:"Robson",note:"",wk:"Wk 3-6"},
  {id:"m-9",task:"Karly role definition",st:"not_started",owner:"Robson",note:"Paid $85K/yr",wk:"Wk 1-6"},
  {id:"m-10",task:"Sales Hot List values populated",st:"not_started",owner:"Jason",note:"92 items at $0",wk:"Wk 1-6"},
  {id:"m-11",task:"Monthly close within 10 days",st:"not_started",owner:"JW Hopp",note:"",wk:"Wk 3-6"},
  {id:"m-12",task:"5 core SOPs documented",st:"not_started",owner:"Nick/Toby",note:"",wk:"Wk 3-6"}
];
var DEF_C=[
  {id:"c-1",label:"1099 \u2192 W-2 Conversion",st:"critical",detail:"12-14 field workers misclassified. $250K-$500K+ exposure.",owner:"Robson + Attorney",dl:"ASAP",notes:""},
  {id:"c-2",label:"Workers\u2019 Comp Policy",st:"critical",detail:"Only Robson & Jason covered. Field crew ZERO coverage.",owner:"Robson",dl:"ASAP",notes:""},
  {id:"c-3",label:"Tax Filing (2023 & 2024)",st:"warning",detail:"JW Hopp at $420/mo. No confirmed filing dates.",owner:"JW Hopp",dl:"Mar 2026",notes:""},
  {id:"c-4",label:"Lien Waiver Backlog",st:"warning",detail:"10 of 52 uploaded (19%). Payment delay risk.",owner:"Karly",dl:"Apr 2026",notes:""},
  {id:"c-5",label:"Pipeline Values",st:"warning",detail:"92 items with $0 values. Analytics broken.",owner:"Jason",dl:"Mar 2026",notes:""},
  {id:"c-6",label:"Bank Account Restructuring",st:"in_progress",detail:"Need separate: operating, tax reserve, payroll.",owner:"Robson",dl:"Mar 2026",notes:""}
];
var BILL=[{month:"Jan",forecast:159000,actual:159000},{month:"Feb",forecast:636000,actual:485000},{month:"Mar",forecast:358921,actual:null},{month:"Apr",forecast:545000,actual:null},{month:"May",forecast:825000,actual:null},{month:"Jun",forecast:536622,actual:null},{month:"Jul",forecast:450000,actual:null},{month:"Aug",forecast:590000,actual:null},{month:"Sep",forecast:543340,actual:null},{month:"Oct",forecast:93495,actual:null},{month:"Nov",forecast:51425,actual:null},{month:"Dec",forecast:0,actual:null}];
var CLIENTS=[{name:"Core Construction",value:2523848,pct:32.7,color:"#3b82f6"},{name:"Swinerton",value:2078438,pct:26.9,color:"#8b5cf6"},{name:"Hill & Wilkinson",value:1500061,pct:19.4,color:"#06b6d4"},{name:"Whiting Turner",value:312091,pct:4.0,color:"#f97316"},{name:"XS Construction",value:380259,pct:4.9,color:"#eab308"},{name:"Others",value:933581,pct:12.1,color:"#64748b"}];
var ARAGE=[{bucket:"Current (0-30)",amount:596350,color:"#22c55e"},{bucket:"31-60 days",amount:47149,color:"#eab308"},{bucket:"61-90 days",amount:86310,color:"#f97316"},{bucket:"90+ days",amount:25926,color:"#ef4444"}];
var TEAMD=[{name:"Robson Pritchett",role:"President/Owner",pay:"$133K/yr",note:"THE BOTTLENECK"},{name:"Jason Fuller",role:"VP Estimating",pay:"$86K/yr",note:"Has bandwidth"},{name:"Karly Pritchett",role:"Office Admin",pay:"$85K/yr",note:"Role undefined"},{name:"Andres Sanchez",role:"Lead Foreman",pay:"$35/hr",note:"Potential super"},{name:"Diego Sanchez",role:"Foreman",pay:"$35/hr",note:""},{name:"Cipriano",role:"Unknown Title",pay:"~$2,400/wk",note:"NOT in org chart"},{name:"Uriel Toledano",role:"Asst. Foreman",pay:"$24/hr",note:""}];
var OWNERS=["Robson","Jason","Karly","JW Hopp","Nick/Toby","Andres"];
var CATS=["compliance","collections","pipeline","operations","financial","admin"];

/* SMALL COMPONENTS */
function Bdg(p){return h("span",{style:{fontSize:10,fontWeight:600,padding:"2px 8px",borderRadius:4,background:p.bg||C.bdr,color:p.color||C.mut,whiteSpace:"nowrap",display:"inline-flex",alignItems:"center",gap:4}},p.children)}
function SBd(p){
  var m={critical:{b:C.red+"18",c:C.red,l:"CRITICAL"},warning:{b:C.amb+"18",c:C.amb,l:"WARNING"},in_progress:{b:C.blu+"18",c:C.blu,l:"IN PROGRESS"},done:{b:C.pri+"18",c:C.pri,l:"DONE"},high:{b:C.red+"18",c:C.red,l:"ACTION"},monitor:{b:C.amb+"18",c:C.amb,l:"WATCH"},low:{b:C.pri+"18",c:C.pri,l:"OK"},active:{b:C.pri+"18",c:C.pri,l:"ACTIVE"},not_started:{b:C.bdr,c:C.mut,l:"NOT STARTED"},closing:{b:C.blu+"18",c:C.blu,l:"CLOSING"},complete:{b:C.pri+"18",c:C.pri,l:"COMPLETE"}};
  var s=m[p.status]||m.low;
  return h("span",{onClick:p.onClick,style:{fontSize:10,fontWeight:600,padding:"2px 8px",borderRadius:4,background:s.b,color:s.c,cursor:p.onClick?"pointer":"default",border:"1px solid "+s.c+"30",userSelect:"none"}},s.l);
}
function PDot(p){return h("span",{style:{width:8,height:8,borderRadius:"50%",background:{1:C.red,2:C.amb,3:C.blu}[p.p],display:"inline-block",flexShrink:0}})}
function CBdg(p){var cc={compliance:C.red,collections:C.amb,pipeline:C.blu,operations:C.pur,financial:C.pri,admin:C.mut};return h("span",{style:{fontSize:10,padding:"2px 6px",borderRadius:4,background:(cc[p.cat]||C.mut)+"15",color:cc[p.cat]||C.mut,fontWeight:500}},p.cat)}
function PBar(p){var v=p.value||0,ht=p.h||6;return h("div",{style:{width:"100%",height:ht,background:C.bdr,borderRadius:ht,overflow:"hidden"}},h("div",{style:{width:Math.max(v,2)+"%",height:"100%",background:v===0?C.dim:v<30?C.blu:v<70?C.cyn:C.pri,borderRadius:ht,transition:"width 0.3s"}}))}
function KPI(p){return h("div",{style:{background:p.alert?C.red+"10":C.card,border:"1px solid "+(p.alert?C.red+"30":C.bdr),borderRadius:10,padding:16}},h("div",{style:{fontSize:22,fontWeight:700,color:p.alert?C.red:C.tx,letterSpacing:"-0.5px",fontFamily:"JetBrains Mono,monospace"}},p.value),h("div",{style:{fontSize:11,color:C.mut,marginTop:2}},p.label),p.sub?h("div",{style:{fontSize:10,color:p.alert?C.red+"99":C.dim,marginTop:6}},p.sub):null)}
function Sel(p){return h("select",{value:p.value,onChange:function(e){p.onChange(e.target.value)},style:{background:C.card,border:"1px solid "+C.bdr,color:C.tx,borderRadius:6,padding:"5px 8px",fontSize:12,width:p.width||140,cursor:"pointer",fontFamily:"DM Sans"}},p.options.map(function(o){var v=typeof o==="string"?o:o.v,l=typeof o==="string"?o:o.l;return h("option",{key:v,value:v},l)}))}
function Modal(p){return h("div",{onClick:p.onClose,style:{position:"fixed",inset:0,background:"#00000080",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50}},h("div",{onClick:function(e){e.stopPropagation()},style:{background:C.card,border:"1px solid "+C.bdr,borderRadius:12,padding:24,maxWidth:"90vw"}},p.children))}
function TH(p){return h("th",{style:{padding:"10px 12px",textAlign:p.right?"right":"left",fontSize:11,fontWeight:500,color:C.mut}},p.children)}
function TD(p){return h("td",{style:Object.assign({padding:"10px 12px",textAlign:p.right?"right":"left",fontFamily:p.mono?"JetBrains Mono,monospace":undefined,fontWeight:p.bold?600:undefined,fontSize:p.mono?11:12},p.sx||{})},p.children)}

/* MAIN APP */
function App(){
  var pg=useState("dashboard"),sb=useState(true);
  var tasks=useState(function(){return ld("tasks",DEF_T)});
  var proj=useState(function(){return ld("proj",DEF_P)});
  var ar=useState(function(){return ld("ar",DEF_AR)});
  var miles=useState(function(){return ld("miles",DEF_M)});
  var comp=useState(function(){return ld("comp",DEF_C)});
  var showAdd=useState(false),eId=useState(null),eF=useState(""),eV=useState("");
  var tf=useState("all"),of_=useState("all"),ps=useState(""),pf=useState("all");
  var showReset=useState(false),saving=useState(false);
  var nt=useState({title:"",owner:"Robson",category:"operations",priority:2,due:"This Week"});

  var page=pg[0],setPg=pg[1],sidebar=sb[0],setSb=sb[1];
  var T=tasks[0],setT=tasks[1],P=proj[0],setP=proj[1],A=ar[0],setA=ar[1],M=miles[0],setM=miles[1],CO=comp[0],setCO=comp[1];
  var add=showAdd[0],setAdd=showAdd[1],eid=eId[0],setEid=eId[1],ef=eF[0],setEf=eF[1],ev=eV[0],setEv=eV[1];
  var catF=tf[0],setCatF=tf[1],ownF=of_[0],setOwnF=of_[1],pSrch=ps[0],setPSrch=ps[1],pFilt=pf[0],setPFilt=pf[1];
  var rst=showReset[0],setRst=showReset[1],sav=saving[0],setSav=saving[1];
  var newT=nt[0],setNewT=nt[1];

  useEffect(function(){var t=setTimeout(function(){setSav(true);sv("tasks",T);sv("proj",P);sv("ar",A);sv("miles",M);sv("comp",CO);setTimeout(function(){setSav(false)},400)},400);return function(){clearTimeout(t)}},[T,P,A,M,CO]);

  function startEdit(id,f,v){setEid(id);setEf(f);setEv(String(v||""))}
  function cancelEdit(){setEid(null);setEf("");setEv("")}
  function saveEdit(setter){var field=ef,val=ev,id=eid;setter(function(prev){return prev.map(function(it){if(it.id!==id)return it;var o={};o[field]=(field==="pct"||field==="amount")?Number(val):val;return Object.assign({},it,o)})});cancelEdit()}
  function toggleTask(id){setT(function(p){return p.map(function(t){return t.id===id?Object.assign({},t,{completed:!t.completed}):t})})}
  function delTask(id){setT(function(p){return p.filter(function(t){return t.id!==id})})}
  function addTask(){if(!newT.title.trim())return;setT(function(p){return p.concat([Object.assign({},newT,{id:"t-"+Date.now(),completed:false,priority:Number(newT.priority)})])});setNewT({title:"",owner:"Robson",category:"operations",priority:2,due:"This Week"});setAdd(false)}
  function toggleMile(id){setM(function(p){return p.map(function(m){return m.id===id?Object.assign({},m,{st:m.st==="not_started"?"partial":m.st==="partial"?"done":"not_started"}):m})})}
  function cycleComp(id){var o=["critical","warning","in_progress","done"];setCO(function(p){return p.map(function(c){return c.id===id?Object.assign({},c,{st:o[(o.indexOf(c.st)+1)%4]}):c})})}
  function cycleProj(id){var o=["not_started","active","closing","complete"];setP(function(p){return p.map(function(pr){return pr.id===id?Object.assign({},pr,{st:o[(o.indexOf(pr.st)+1)%4]}):pr})})}
  function cycleRisk(id){var o=["high","monitor","low"];setA(function(p){return p.map(function(a){return a.id===id?Object.assign({},a,{risk:o[(o.indexOf(a.risk)+1)%3]}):a})})}
  function resetAll(){setT(DEF_T);setP(DEF_P);setA(DEF_AR);setM(DEF_M);setCO(DEF_C);setRst(false)}

  var mDone=M.filter(function(m){return m.st==="done"}).length;
  var crit=T.filter(function(t){return!t.completed&&t.priority===1}).length;
  var critC=CO.filter(function(c){return c.st==="critical"}).length;
  var done=T.filter(function(t){return t.completed}).length;
  var fTasks=T.filter(function(t){return(catF==="all"||t.category===catF)&&(ownF==="all"||t.owner===ownF)});
  var fProj=P.filter(function(p){return(pFilt==="all"||p.st===pFilt)&&(!pSrch||p.name.toLowerCase().indexOf(pSrch.toLowerCase())>=0||p.client.toLowerCase().indexOf(pSrch.toLowerCase())>=0)});

  var d=new Date();
  var dateStr=d.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});
  var greet=d.getHours()<12?"Good morning":d.getHours()<17?"Good afternoon":"Good evening";

  function InEdit(p){return h("div",{style:{display:"flex",gap:4,alignItems:"center"}},h("input",{value:ev,onChange:function(e){setEv(e.target.value)},type:p.type||"text",autoFocus:true,onKeyDown:function(e){if(e.key==="Enter")p.onSave();if(e.key==="Escape")cancelEdit()},style:{background:C.bg,border:"1px solid "+C.pri,color:C.tx,borderRadius:6,padding:"4px 8px",fontSize:12,width:p.w||"100%"}}),h("button",{onClick:p.onSave,style:{background:C.pri+"18",border:"none",color:C.pri,borderRadius:4,padding:"4px 6px",cursor:"pointer",fontSize:12}},"\u2713"),h("button",{onClick:cancelEdit,style:{background:C.red+"18",border:"none",color:C.red,borderRadius:4,padding:"4px 6px",cursor:"pointer",fontSize:12}},"\u2715"))}

  var navItems=[{id:"dashboard",label:"Dashboard",icon:"home"},{id:"tasks",label:"Tasks",icon:"checkSq"},{id:"projects",label:"Projects",icon:"building"},{id:"financials",label:"Financials",icon:"dollar"},{id:"compliance",label:"Compliance",icon:"shield"},{id:"team",label:"Team",icon:"users"}];

  function NavBtn(p){var active=page===p.id;return h("button",{onClick:function(){setPg(p.id)},style:{width:"100%",display:"flex",alignItems:"center",gap:sidebar?10:0,justifyContent:sidebar?"flex-start":"center",padding:"8px 12px",borderRadius:8,border:"none",cursor:"pointer",fontSize:13,fontWeight:active?600:400,background:active?C.pri+"18":"transparent",color:active?C.pri:C.mut,transition:"all 0.15s",fontFamily:"DM Sans,system-ui"}},Ic(p.icon,18,active?C.pri:C.mut),sidebar?h("span",{style:{flex:1,textAlign:"left"}},p.label):null,sidebar&&p.cnt>0?h("span",{style:{fontSize:10,fontWeight:700,padding:"1px 6px",borderRadius:10,background:C.red+"20",color:C.red}},p.cnt):null)}

  /* BUILD CONTENT */
  var content=[];

  if(page==="dashboard"){
    if(critC>0)content.push(h("div",{key:"alert",style:{background:C.red+"10",border:"1px solid "+C.red+"30",borderRadius:10,padding:14,display:"flex",alignItems:"center",gap:12}},Ic("alert",20,C.red),h("div",{style:{flex:1}},h("div",{style:{fontSize:13,fontWeight:600,color:C.red}},critC+" Critical Compliance Items"),h("div",{style:{fontSize:11,color:C.red+"88",marginTop:2}},"1099 misclassification & no workers\u2019 comp. Attorney consultation overdue.")),h("button",{onClick:function(){setPg("compliance")},style:{background:C.red+"30",border:"none",color:C.red,borderRadius:6,padding:"6px 14px",cursor:"pointer",fontSize:12,fontWeight:600,fontFamily:"DM Sans"}},"View \u2192")));
    content.push(h("div",{key:"kpi",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(200px,1fr))",gap:12}},h(KPI,{value:fmt(644000),label:"YTD Billed (2026)",sub:"14.6% of $4.4M target"}),h(KPI,{value:fmt(755735),label:"AR Outstanding",sub:"$26K at 90+ days"}),h(KPI,{value:fmt(7728278),label:"Total WIP Value",sub:fmt(4681281)+" remaining"}),h(KPI,{value:fmt(144920),label:"Q4 Forecast (Oct-Nov)",sub:"Revenue cliff",alert:true})));
    content.push(h("div",{key:"chart",style:{background:C.card,border:"1px solid "+C.bdr,borderRadius:10,padding:20}},h("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:12}},h("div",null,h("div",{style:{fontSize:14,fontWeight:600}},"2026 Billing Forecast"),h("div",{style:{fontSize:11,color:C.mut}},"Contracted jobs \u00B7 $4.8M total")),h("div",{style:{display:"flex",gap:16,fontSize:10,color:C.mut,alignItems:"center"}},h("span",{style:{display:"flex",gap:4,alignItems:"center"}},h("span",{style:{width:12,height:5,borderRadius:2,background:"#22c55e"}}),"Actual"),h("span",{style:{display:"flex",gap:4,alignItems:"center"}},h("span",{style:{width:12,height:5,borderRadius:2,background:C.blu,opacity:0.6}}),"Forecast"))),h(SvgBar,{data:BILL})));
    var priT=T.filter(function(t){return!t.completed&&t.priority<=2}).slice(0,7);
    content.push(h("div",{key:"mid",style:{display:"grid",gridTemplateColumns:"3fr 2fr",gap:16}},h("div",{style:{background:C.card,border:"1px solid "+C.bdr,borderRadius:10,padding:16}},h("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:10}},h("span",{style:{fontSize:14,fontWeight:600}},"Priority Actions"),h("button",{onClick:function(){setPg("tasks")},style:{background:"transparent",border:"none",color:C.pri,cursor:"pointer",fontSize:12,fontFamily:"DM Sans"}},"All Tasks \u2192")),priT.map(function(t){return h("div",{key:t.id,onClick:function(){toggleTask(t.id)},style:{display:"flex",alignItems:"center",gap:10,padding:"8px 10px",borderRadius:8,marginBottom:4,background:t.priority===1?C.red+"10":"transparent",border:t.priority===1?"1px solid "+C.red+"20":"1px solid transparent",cursor:"pointer"}},h("input",{type:"checkbox",checked:t.completed,readOnly:true}),h(PDot,{p:t.priority}),h("span",{style:{flex:1,fontSize:12}},t.title),h("span",{style:{fontSize:10,color:C.mut}},t.owner),h(CBdg,{cat:t.category}))})),h("div",{style:{background:C.card,border:"1px solid "+C.bdr,borderRadius:10,padding:16}},h("div",{style:{fontSize:14,fontWeight:600}},"Client Concentration"),h("div",{style:{fontSize:10,color:C.amb,marginTop:2}},"Top 3 = 79% of $7.7M WIP"),h("div",{style:{display:"flex",alignItems:"center",gap:16,marginTop:12}},h(SvgPie,{data:CLIENTS}),h("div",{style:{flex:1}},CLIENTS.map(function(c){return h("div",{key:c.name,style:{display:"flex",justifyContent:"space-between",padding:"3px 0"}},h("div",{style:{display:"flex",alignItems:"center",gap:6}},h("span",{style:{width:8,height:8,borderRadius:2,background:c.color}}),h("span",{style:{fontSize:11,color:C.mut}},c.name)),h("span",{style:{fontSize:11,fontWeight:600}},c.pct+"%"))}))))));
    content.push(h("div",{key:"stats",style:{display:"grid",gridTemplateColumns:"repeat(4,1fr)",gap:12}},h(KPI,{value:done+"/"+T.length,label:"Tasks Completed"}),h(KPI,{value:"10/52",label:"Lien Waivers Done",sub:"81% incomplete"}),h(KPI,{value:"92",label:"Pipeline Items",sub:"ALL at $0"}),h(KPI,{value:fmt(203721),label:"Retainage Held"})));
  }

  if(page==="tasks"){
    content.push(h("div",{key:"hd",style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},h("div",null,h("h2",{style:{fontSize:18,fontWeight:700}},"Task Management"),h("p",{style:{fontSize:12,color:C.mut}},done+" of "+T.length+" completed \u00B7 "+crit+" critical")),h("button",{onClick:function(){setAdd(true)},style:{background:C.pri,border:"none",color:"#fff",borderRadius:8,padding:"8px 16px",cursor:"pointer",fontSize:13,fontWeight:600,display:"flex",alignItems:"center",gap:4,fontFamily:"DM Sans"}},Ic("plus",14,"#fff")," Add Task")));
    content.push(h("div",{key:"fl",style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"}},h(Sel,{value:catF,onChange:setCatF,options:[{v:"all",l:"All Categories"}].concat(CATS.map(function(c){return{v:c,l:c}}))}),h(Sel,{value:ownF,onChange:setOwnF,options:[{v:"all",l:"All Owners"}].concat(OWNERS.map(function(o){return{v:o,l:o}})),width:130}),h("div",{style:{marginLeft:"auto",display:"flex",gap:8,fontSize:11,color:C.mut,alignItems:"center"}},h(PDot,{p:1})," Critical ",h(PDot,{p:2})," High ",h(PDot,{p:3})," Important")));
    var actT=fTasks.filter(function(t){return!t.completed}).sort(function(a,b){return a.priority-b.priority});
    content.push(h("div",{key:"ac",style:{background:C.card,border:"1px solid "+C.bdr,borderRadius:10,padding:12}},h("div",{style:{fontSize:13,fontWeight:600,marginBottom:8,padding:"0 4px"}},"Active"),actT.length===0?h("div",{style:{fontSize:12,color:C.mut,padding:16,textAlign:"center"}},"No tasks match"):actT.map(function(t){return h("div",{key:t.id,style:{display:"flex",alignItems:"center",gap:10,padding:"8px 10px",borderRadius:8,marginBottom:3,background:t.priority===1?C.red+"10":"transparent",border:t.priority===1?"1px solid "+C.red+"20":"1px solid transparent"}},h("input",{type:"checkbox",checked:false,onChange:function(){toggleTask(t.id)}}),h(PDot,{p:t.priority}),h("div",{style:{flex:1}},h("div",{style:{fontSize:12}},t.title),h("div",{style:{fontSize:10,color:C.mut,marginTop:2}},t.owner+" \u00B7 "+t.due+(t.recurring?" \u00B7 \u21BB "+t.recurring:""))),h(CBdg,{cat:t.category}),h("button",{onClick:function(){delTask(t.id)},style:{background:"transparent",border:"none",color:C.dim,cursor:"pointer",padding:4}},Ic("trash",14,C.dim)))})));
    var cmpT=fTasks.filter(function(t){return t.completed});
    if(cmpT.length>0)content.push(h("div",{key:"cm",style:{background:C.card,border:"1px solid "+C.bdr,borderRadius:10,padding:12}},h("div",{style:{fontSize:13,fontWeight:600,marginBottom:8,color:C.mut}},"Completed ("+cmpT.length+")"),cmpT.map(function(t){return h("div",{key:t.id,style:{display:"flex",alignItems:"center",gap:10,padding:"6px 10px",opacity:0.5}},h("input",{type:"checkbox",checked:true,onChange:function(){toggleTask(t.id)}}),h("span",{style:{fontSize:12,textDecoration:"line-through",flex:1}},t.title),h("button",{onClick:function(){delTask(t.id)},style:{background:"transparent",border:"none",color:C.dim,cursor:"pointer"}},Ic("trash",14,C.dim)))})));
    if(add)content.push(h(Modal,{key:"md",onClose:function(){setAdd(false)}},h("div",{style:{width:400}},h("h3",{style:{fontSize:16,fontWeight:700,marginBottom:16}},"Add New Task"),h("div",{style:{display:"flex",flexDirection:"column",gap:12}},h("div",null,h("label",{style:{fontSize:11,color:C.mut,display:"block",marginBottom:4}},"Task"),h("input",{value:newT.title,onChange:function(e){setNewT(Object.assign({},newT,{title:e.target.value}))},placeholder:"What needs to be done?",onKeyDown:function(e){if(e.key==="Enter")addTask()},style:{width:"100%",background:C.bg,border:"1px solid "+C.bdr,color:C.tx,borderRadius:8,padding:"8px 12px",fontSize:13,fontFamily:"DM Sans"}})),h("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12}},h("div",null,h("label",{style:{fontSize:11,color:C.mut,display:"block",marginBottom:4}},"Owner"),h(Sel,{value:newT.owner,onChange:function(v){setNewT(Object.assign({},newT,{owner:v}))},options:OWNERS,width:"100%"})),h("div",null,h("label",{style:{fontSize:11,color:C.mut,display:"block",marginBottom:4}},"Category"),h(Sel,{value:newT.category,onChange:function(v){setNewT(Object.assign({},newT,{category:v}))},options:CATS,width:"100%"}))),h("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12}},h("div",null,h("label",{style:{fontSize:11,color:C.mut,display:"block",marginBottom:4}},"Priority"),h(Sel,{value:newT.priority,onChange:function(v){setNewT(Object.assign({},newT,{priority:Number(v)}))},options:[{v:1,l:"Critical"},{v:2,l:"High"},{v:3,l:"Important"}],width:"100%"})),h("div",null,h("label",{style:{fontSize:11,color:C.mut,display:"block",marginBottom:4}},"Due"),h(Sel,{value:newT.due,onChange:function(v){setNewT(Object.assign({},newT,{due:v}))},options:["Today","This Week","Next 2 Weeks","Next 30 Days","Weekly","Monthly"],width:"100%"})))),h("div",{style:{display:"flex",gap:8,justifyContent:"flex-end",marginTop:20}},h("button",{onClick:function(){setAdd(false)},style:{background:C.bdr,border:"none",color:C.tx,borderRadius:8,padding:"8px 16px",cursor:"pointer",fontSize:13,fontFamily:"DM Sans"}},"Cancel"),h("button",{onClick:addTask,disabled:!newT.title.trim(),style:{background:newT.title.trim()?C.pri:C.bdr,border:"none",color:"#fff",borderRadius:8,padding:"8px 20px",cursor:newT.title.trim()?"pointer":"default",fontSize:13,fontWeight:600,opacity:newT.title.trim()?1:0.5,fontFamily:"DM Sans"}},"Add Task")))));
  }

  if(page==="projects"){
    content.push(h("div",{key:"hd"},h("h2",{style:{fontSize:18,fontWeight:700}},"Work in Progress"),h("p",{style:{fontSize:12,color:C.mut}},"35 projects \u00B7 "+fmt(7728278)+" total \u00B7 "+fmt(4681281)+" remaining")));
    content.push(h("div",{key:"kp",style:{display:"grid",gridTemplateColumns:"repeat(4,1fr)",gap:12}},h(KPI,{value:"35",label:"Active Projects",sub:"7 not started ($2.2M)"}),h(KPI,{value:fmt(7728278),label:"Total Contract Value"}),h(KPI,{value:fmt(4681281),label:"Remaining to Bill"}),h(KPI,{value:fmt(1590566),label:"Bonded Work"})));
    content.push(h("div",{key:"fl",style:{display:"flex",gap:8,alignItems:"center"}},h("input",{placeholder:"Search projects or clients...",value:pSrch,onChange:function(e){setPSrch(e.target.value)},style:{background:C.card,border:"1px solid "+C.bdr,color:C.tx,borderRadius:8,padding:"6px 12px",fontSize:12,width:260,fontFamily:"DM Sans"}}),h(Sel,{value:pFilt,onChange:setPFilt,options:[{v:"all",l:"All Status"},{v:"active",l:"Active"},{v:"not_started",l:"Not Started"},{v:"complete",l:"Complete"}]}),h("div",{style:{marginLeft:"auto",fontSize:10,color:C.mut}},"Click status \u00B7 Click % or notes to edit")));
    content.push(h("div",{key:"tb",style:{background:C.card,border:"1px solid "+C.bdr,borderRadius:10,overflow:"auto"}},h("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12}},h("thead",null,h("tr",{style:{borderBottom:"1px solid "+C.bdr}},h(TH,null,"Project"),h(TH,null,"Client"),h(TH,{right:true},"Contract"),h(TH,{right:true},"Remaining"),h(TH,null,"Progress"),h(TH,null,"Status"),h(TH,null,"Notes"))),h("tbody",null,fProj.map(function(p){return h("tr",{key:p.id,style:{borderBottom:"1px solid "+C.bdr+"20"}},h(TD,null,h("div",{style:{fontWeight:500}},p.id+" \u2014 "+p.name),p.bond?h(Bdg,{bg:C.pur+"20",color:C.pur},"BONDED"):null,p.start&&p.st==="not_started"?h("div",{style:{fontSize:10,color:C.mut,marginTop:2}},"Starts "+p.start):null),h(TD,{sx:{color:C.mut}},p.client),h(TD,{right:true,mono:true},fmtF(p.tc)),h(TD,{right:true,mono:true,bold:true},fmtF(p.rem)),h(TD,{sx:{width:140}},eid===p.id&&ef==="pct"?h(InEdit,{onSave:function(){saveEdit(setP)},type:"number",w:60}):h("div",{onClick:function(){startEdit(p.id,"pct",p.pct)},style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"}},h(PBar,{value:p.pct,h:5}),h("span",{style:{fontSize:10,color:C.mut,width:30,textAlign:"right"}},p.pct+"%"))),h(TD,null,h(SBd,{status:p.st,onClick:function(){cycleProj(p.id)}})),h(TD,{sx:{maxWidth:160}},eid===p.id&&ef==="notes"?h(InEdit,{onSave:function(){saveEdit(setP)},w:140}):h("span",{onClick:function(){startEdit(p.id,"notes",p.notes||"")},style:{fontSize:11,color:p.notes?C.mut:C.dim,cursor:"pointer"}},p.notes||"+ Add note")))})))));
  }

  if(page==="financials"){
    content.push(h("h2",{key:"hd",style:{fontSize:18,fontWeight:700}},"Financials & Collections"));
    content.push(h("div",{key:"kp",style:{display:"grid",gridTemplateColumns:"repeat(4,1fr)",gap:12}},h(KPI,{value:fmtF(755735),label:"Total AR Outstanding"}),h(KPI,{value:"$25,926",label:"AR at 90+ Days",alert:true,sub:"MLGP $17K + H&W $9K"}),h(KPI,{value:fmtF(203721),label:"Retainage Receivable"}),h(KPI,{value:"$125K-$195K",label:"Monthly Burn Rate"})));
    content.push(h("div",{key:"ag",style:{background:C.card,border:"1px solid "+C.bdr,borderRadius:10,padding:20}},h("div",{style:{fontSize:14,fontWeight:600,marginBottom:12}},"AR Aging"),ARAGE.map(function(b){return h("div",{key:b.bucket,style:{marginBottom:12}},h("div",{style:{display:"flex",justifyContent:"space-between",fontSize:12,marginBottom:4}},h("span",{style:{color:C.mut}},b.bucket),h("span",{style:{fontWeight:600,fontFamily:"JetBrains Mono,monospace"}},fmtF(b.amount))),h("div",{style:{width:"100%",height:18,background:C.bdr,borderRadius:9,overflow:"hidden"}},h("div",{style:{width:Math.max((b.amount/755735)*100,4)+"%",height:"100%",background:b.color,borderRadius:9,display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:6}},h("span",{style:{fontSize:9,fontWeight:700,color:"#fff"}},((b.amount/755735)*100).toFixed(1)+"%"))))})));
    content.push(h("div",{key:"cl",style:{background:C.card,border:"1px solid "+C.bdr,borderRadius:10,overflow:"auto"}},h("div",{style:{padding:"14px 16px",borderBottom:"1px solid "+C.bdr}},h("div",{style:{fontSize:14,fontWeight:600}},"Collection Priorities"),h("div",{style:{fontSize:10,color:C.mut}},"Click notes to edit \u00B7 Click risk to change")),h("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12}},h("thead",null,h("tr",{style:{borderBottom:"1px solid "+C.bdr}},h(TH,null,"Client"),h(TH,null,"Project"),h(TH,{right:true},"Amount"),h(TH,null,"Aging"),h(TH,null,"Risk"),h(TH,null,"Notes"),h(TH,null,"Last Contact"))),h("tbody",null,A.slice().sort(function(a,b){return({high:0,monitor:1,low:2}[a.risk]-{high:0,monitor:1,low:2}[b.risk])||(b.amount-a.amount)}).map(function(it){return h("tr",{key:it.id,style:{borderBottom:"1px solid "+C.bdr+"20",background:it.risk==="high"?C.red+"10":"transparent"}},h(TD,{sx:{fontWeight:500}},it.client),h(TD,{sx:{color:C.mut}},it.project),h(TD,{right:true,mono:true,bold:true},fmtF(it.amount)),h(TD,{sx:{color:C.mut}},it.aging),h(TD,null,h(SBd,{status:it.risk,onClick:function(){cycleRisk(it.id)}})),h(TD,{sx:{maxWidth:200}},eid===it.id&&ef==="notes"?h(InEdit,{onSave:function(){saveEdit(setA)},w:180}):h("span",{onClick:function(){startEdit(it.id,"notes",it.notes)},style:{fontSize:11,color:C.mut,cursor:"pointer"}},it.notes)),h(TD,null,eid===it.id&&ef==="lc"?h(InEdit,{onSave:function(){saveEdit(setA)},w:100}):h("span",{onClick:function(){startEdit(it.id,"lc",it.lc||"")},style:{fontSize:11,color:it.lc?C.mut:C.dim,cursor:"pointer"}},it.lc||"+ Log")))})))));
  }

  if(page==="compliance"){
    content.push(h("h2",{key:"hd",style:{fontSize:18,fontWeight:700}},"Compliance & Phase 1 Milestones"));
    CO.forEach(function(it){content.push(h("div",{key:it.id,style:{background:it.st==="critical"?C.red+"10":it.st==="warning"?C.amb+"10":C.card,border:"1px solid "+(it.st==="critical"?C.red+"30":it.st==="warning"?C.amb+"30":C.bdr),borderRadius:10,padding:16,display:"flex",gap:14}},Ic(it.st==="critical"||it.st==="warning"?"alert":"check",22,it.st==="critical"?C.red:it.st==="warning"?C.amb:it.st==="done"?C.pri:C.blu),h("div",{style:{flex:1}},h("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4}},h("span",{style:{fontSize:14,fontWeight:600}},it.label),h(SBd,{status:it.st,onClick:function(){cycleComp(it.id)}})),h("p",{style:{fontSize:12,color:C.mut,lineHeight:1.5}},it.detail),h("div",{style:{display:"flex",gap:4,marginTop:8,fontSize:11,color:C.mut}},"Owner: ",h("b",{style:{color:C.tx}},it.owner)," \u00B7 Deadline: ",h("b",{style:{color:it.dl==="ASAP"?C.red:C.tx}},it.dl)),h("div",{style:{marginTop:8}},eid===it.id&&ef==="notes"?h(InEdit,{onSave:function(){saveEdit(setCO)},w:"100%"}):h("span",{onClick:function(){startEdit(it.id,"notes",it.notes||"")},style:{fontSize:11,color:it.notes?C.mut:C.dim,cursor:"pointer",fontStyle:it.notes?"normal":"italic"}},it.notes||"+ Add notes...")))))});
    content.push(h("div",{key:"mh",style:{marginTop:8}},h("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8}},h("span",{style:{fontSize:13,fontWeight:600}},"Phase 1 Milestones"),h("span",{style:{fontSize:11,color:C.mut}},mDone+"/"+M.length)),h(PBar,{value:(mDone/M.length)*100,h:8})));
    content.push(h("div",{key:"ml",style:{background:C.card,border:"1px solid "+C.bdr,borderRadius:10,padding:12}},h("div",{style:{fontSize:10,color:C.mut,marginBottom:8}},"Click icons to cycle status"),M.map(function(m){return h("div",{key:m.id,onClick:function(){toggleMile(m.id)},style:{display:"flex",alignItems:"center",gap:10,padding:"8px 10px",borderRadius:8,marginBottom:3,cursor:"pointer"}},Ic(m.st==="done"?"check":m.st==="partial"?"clock":"target",16,m.st==="done"?C.pri:m.st==="partial"?C.amb:C.dim),h("div",{style:{flex:1}},h("span",{style:{fontSize:12,textDecoration:m.st==="done"?"line-through":"none",color:m.st==="done"?C.mut:C.tx}},m.task),m.note?h("span",{style:{fontSize:10,display:"block",marginTop:2,color:m.note.indexOf("OVERDUE")>=0?C.red:C.dim}},m.note):null),h("span",{style:{fontSize:10,color:C.mut}},m.owner),h(Bdg,null,m.wk))})));
  }

  if(page==="team"){
    content.push(h("h2",{key:"hd",style:{fontSize:18,fontWeight:700}},"Team Overview"));
    content.push(h("p",{key:"sub",style:{fontSize:12,color:C.mut}},"16 total \u00B7 ~$816K annualized \u00B7 Field payroll ~$10-15K/wk"));
    content.push(h("div",{key:"gr",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12}},TEAMD.map(function(m){return h("div",{key:m.name,style:{background:C.card,border:"1px solid "+C.bdr,borderRadius:10,padding:16,display:"flex",gap:14}},h("div",{style:{width:40,height:40,borderRadius:"50%",background:C.bdr,display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,fontWeight:700,flexShrink:0}},m.name.split(" ").map(function(n){return n[0]}).join("").slice(0,2)),h("div",null,h("div",{style:{fontSize:14,fontWeight:600}},m.name),h("div",{style:{fontSize:12,color:C.mut}},m.role),h("div",{style:{fontSize:11,color:C.mut,marginTop:4,fontFamily:"JetBrains Mono,monospace"}},m.pay),m.note?h("div",{style:{fontSize:10,color:C.amb,marginTop:4}},m.note):null))})));
    content.push(h("div",{key:"fc",style:{background:C.amb+"10",border:"1px solid "+C.amb+"30",borderRadius:10,padding:16}},h("div",{style:{fontSize:13,fontWeight:600,color:C.amb}},"Field Crew"),h("p",{style:{fontSize:12,color:C.mut,marginTop:6}},"7+ laborers at $20.50/hr: Mariano, Armando, Jose (\u00D72), Nicolas, Juan, Rigoberto, Adrian, Jonathan. All 1099 \u2014 W-2 conversion required.")));
  }

  /* FULL LAYOUT */
  return h("div",{style:{display:"flex",height:"100vh",background:C.bg,color:C.tx,overflow:"hidden"}},
    h("aside",{style:{width:sidebar?210:56,flexShrink:0,borderRight:"1px solid "+C.bdr,background:C.card+"80",display:"flex",flexDirection:"column",transition:"width 0.2s"}},
      h("div",{style:{padding:14,display:"flex",alignItems:"center",gap:sidebar?10:0,justifyContent:sidebar?"flex-start":"center",borderBottom:"1px solid "+C.bdr}},h("div",{style:{width:32,height:32,borderRadius:8,background:C.pri,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,color:"#fff",fontSize:14,flexShrink:0}},"A"),sidebar?h("div",null,h("div",{style:{fontSize:13,fontWeight:700}},"Americana"),h("div",{style:{fontSize:10,color:C.mut}},"CEO Dashboard")):null),
      h("div",{style:{flex:1,padding:"8px 6px",display:"flex",flexDirection:"column",gap:2,overflowY:"auto"}},navItems.map(function(n){return h(NavBtn,{key:n.id,id:n.id,label:n.label,icon:n.icon,cnt:n.id==="tasks"?crit:n.id==="compliance"?critC:0})})),
      sidebar?h("div",{style:{padding:14,borderTop:"1px solid "+C.bdr}},h("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,color:C.mut,marginBottom:4}},h("span",null,"Phase 1"),h("span",null,mDone+"/"+M.length+" \u00B7 Wk 3/13")),h(PBar,{value:(mDone/M.length)*100})):null,
      h("div",{style:{padding:6,borderTop:"1px solid "+C.bdr}},h("button",{onClick:function(){setSb(!sidebar)},style:{width:"100%",background:"transparent",border:"none",color:C.mut,cursor:"pointer",padding:6,borderRadius:6,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",gap:4,fontFamily:"DM Sans"}},Ic(sidebar?"chevL":"chevR",14),sidebar?" Collapse":null))
    ),
    h("main",{style:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"}},
      h("header",{style:{padding:"14px 24px",borderBottom:"1px solid "+C.bdr,display:"flex",alignItems:"center",justifyContent:"space-between",background:C.card+"50",flexShrink:0}},h("div",null,h("h1",{style:{fontSize:17,fontWeight:700}},greet+", Robson"),h("p",{style:{fontSize:11,color:C.mut}},dateStr+" \u00B7 Phase 1 \u2014 Week 3 of 13")),h("div",{style:{display:"flex",gap:8,alignItems:"center"}},sav?h("span",{style:{fontSize:10,color:C.pri}},"Saving..."):null,h(Bdg,{bg:C.red+"18",color:C.red},Ic("alert",12,C.red)," "+critC+" Critical"),h(Bdg,{bg:C.amb+"18",color:C.amb},Ic("clock",12,C.amb)," "+crit+" Urgent"),h("button",{onClick:function(){setRst(true)},style:{background:C.card,border:"1px solid "+C.bdr,color:C.mut,borderRadius:6,padding:"4px 10px",cursor:"pointer",fontSize:11,display:"flex",alignItems:"center",gap:4,fontFamily:"DM Sans"}},Ic("refresh",12)," Reset"))),
      h("div",{style:{flex:1,overflowY:"auto",padding:24}},h("div",{style:{maxWidth:1300,display:"flex",flexDirection:"column",gap:20}},content))
    ),
    rst?h(Modal,{onClose:function(){setRst(false)}},h("div",{style:{width:360}},h("h3",{style:{fontSize:16,fontWeight:700,marginBottom:8}},"Reset All Data?"),h("p",{style:{fontSize:12,color:C.mut,marginBottom:20}},"Resets everything to defaults. Cannot be undone."),h("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"}},h("button",{onClick:function(){setRst(false)},style:{background:C.bdr,border:"none",color:C.tx,borderRadius:8,padding:"8px 16px",cursor:"pointer",fontSize:13,fontFamily:"DM Sans"}},"Cancel"),h("button",{onClick:resetAll,style:{background:C.red,border:"none",color:"#fff",borderRadius:8,padding:"8px 20px",cursor:"pointer",fontSize:13,fontWeight:600,fontFamily:"DM Sans"}},"Reset All")))):null
  );
}

ReactDOM.render(h(App), document.getElementById("root"));
</script></body></html>
